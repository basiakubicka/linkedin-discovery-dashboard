"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["877"],{13983:function(e,t,n){n.r(t),n.d(t,{SessionTask:()=>$}),n(65223),n(38062),n(50725);var i=n(79109),r=n(83799),o=n(72810),a=n(69144),l=n(44455),c=n(2672),s=n(21455),u=n(76663),d=n(11576),Z=n(86988),v=n(24676),h=n(89888),g=n(91816),p=n(85536),f=n(57484);let k=(0,c.withCardStateProvider)(()=>{let{userMemberships:e,userInvitations:t,userSuggestions:n}=(0,r.eW)(f.AO),o=(0,a.useRef)(),l=(null==e?void 0:e.isLoading)||(null==t?void 0:t.isLoading)||(null==n?void 0:n.isLoading),c=!!((null==e?void 0:e.count)||(null==t?void 0:t.count)||(null==n?void 0:n.count));return l?(0,i.tZ)(C,{children:(0,i.tZ)(m,{})}):c||"organization-selection"===o.current?(0,i.tZ)(x,{currentFlow:o}):(0,i.tZ)(S,{currentFlow:o})}),x=e=>{let{currentFlow:t}=e,[n,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t.current="organization-selection"},[t]),(0,i.tZ)(d.OrganizationListContext.Provider,{value:{componentName:"OrganizationList",skipInvitationScreen:!0},children:(0,i.tZ)(C,{children:n?(0,i.tZ)(h.Box,{sx:e=>({padding:"".concat(e.space.$none," ").concat(e.space.$5," ").concat(e.space.$5)}),children:(0,i.tZ)(g.$,{flow:"default",startPage:{headerTitle:(0,h.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0,onCancel:()=>r(!1)})}):(0,i.tZ)(p.S,{onCreateOrganizationClick:()=>r(!0)})})})},S=e=>{let{currentFlow:t}=e;return(0,a.useEffect)(()=>{t.current="create-organization"},[t]),(0,i.tZ)(C,{children:(0,i.tZ)(h.Box,{sx:e=>({padding:"".concat(e.space.$none," ").concat(e.space.$5," ").concat(e.space.$5)}),children:(0,i.tZ)(g.$,{flow:"default",startPage:{headerTitle:(0,h.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0})})})},C=e=>{let{children:t}=e,n=(0,c.useCardState)(),{currentTaskContainer:r}=(0,Z.G)();return(0,i.BX)(l.Z.Root,{ref:r,children:[(0,i.BX)(l.Z.Content,{sx:e=>({padding:"".concat(e.space.$8," ").concat(e.space.$none," ").concat(e.space.$none)}),children:[(0,i.tZ)(l.Z.Alert,{sx:e=>({margin:"".concat(e.space.$none," ").concat(e.space.$5)}),children:n.error}),t]}),(0,i.tZ)(l.Z.Footer,{})]})},m=()=>(0,i.tZ)(h.Flex,{direction:"row",center:!0,sx:e=>({height:"100%",minHeight:e.sizes.$60}),children:(0,i.tZ)(h.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:h.descriptors.spinner})}),z=()=>{let e=(0,r.cL)(),{navigate:t}=(0,v.useRouter)(),{redirectUrlComplete:n}=(0,Z.G)();return(0,a.useEffect)(()=>{let t=setTimeout(()=>{e.__experimental_navigateToTask({redirectUrlComplete:n})},500);return()=>clearTimeout(t)},[t,e,n]),(0,i.BX)(l.Z.Root,{children:[(0,i.tZ)(l.Z.Content,{children:(0,i.tZ)(s.I,{})}),(0,i.tZ)(l.Z.Footer,{})]})};function T(){return(0,i.BX)(v.Switch,{children:[(0,i.tZ)(v.Route,{path:u.m.org,children:(0,i.tZ)(k,{})}),(0,i.tZ)(v.Route,{index:!0,children:(0,i.tZ)(z,{})})]})}let $=(0,c.withCardStateProvider)(()=>{var e,t,n;let c=(0,r.cL)(),{navigate:u}=(0,v.useRouter)(),h=(0,a.useContext)(d.SignInContext),g=(0,a.useContext)(d.SignUpContext),[p,f]=(0,a.useState)(!1),k=(0,a.useRef)(null),x=null!==(n=null!==(t=null==h?void 0:h.afterSignInUrl)&&void 0!==t?t:null==g?void 0:g.afterSignUpUrl)&&void 0!==n?n:null==c?void 0:c.buildAfterSignInUrl();(0,a.useEffect)(()=>{var e,t,n;if(p)return;let i=null===(e=c.session)||void 0===e?void 0:e.currentTask;if(!i||(null===(t=c.session)||void 0===t?void 0:t.status)==="active"){u(x);return}null===(n=c.telemetry)||void 0===n||n.record((0,o.Zg)("SessionTask",{task:i.key}))},[c,u,p,x]);let S=(0,a.useCallback)(()=>(f(!0),c.__experimental_navigateToTask({redirectUrlComplete:x}).finally(()=>f(!1))),[c,x]);return(null===(e=c.session)||void 0===e?void 0:e.currentTask)?(0,i.tZ)(Z.H.Provider,{value:{nextTask:S,redirectUrlComplete:x,currentTaskContainer:k},children:(0,i.tZ)(T,{})}):(0,i.BX)(l.Z.Root,{sx:()=>{var e;return{minHeight:k?null===(e=k.current)||void 0===e?void 0:e.offsetHeight:void 0}},children:[(0,i.tZ)(l.Z.Content,{sx:()=>({flex:1}),children:(0,i.tZ)(s.I,{})}),(0,i.tZ)(l.Z.Footer,{})]})})}}]);